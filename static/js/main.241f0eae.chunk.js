(window["webpackJsonpquidditch-scheduler"]=window["webpackJsonpquidditch-scheduler"]||[]).push([[0],{162:function(e,t,a){e.exports=a(256)},178:function(e,t){},180:function(e,t){},212:function(e,t){},213:function(e,t){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),s=a(18),o=a(15),l=a(21),d=a(22),u=a(23),h=a(19),p=a(16),m=a(289),g=a(294),f=a(297),b=a(298),y=a(49),v=a(295),w=a(96),k=a.n(w);a(171);k.a.initializeApp({apiKey:"AIzaSyBpqnQ8cxhPbRoN49bsEfy9oFnK-HG9Fgw",authDomain:"rpi-quidditch.firebaseapp.com",databaseURL:"https://rpi-quidditch.firebaseio.com",projectId:"rpi-quidditch",storageBucket:"rpi-quidditch.appspot.com",messagingSenderId:"1051970990113",appId:"1:1051970990113:web:b79f5666c401f46b"});var E=k.a.firestore(),_=a(65),O=a.n(_),j=a(306),P=a(293),C=a(292),S=a(73),D=a.n(S),A=a(72),L=a.n(A),x=a(153),W=a(147),I=a.n(W),R=a(148),U=a.n(R),M=Object(x.a)({palette:{primary:I.a,secondary:U.a}}),q={margin:15},z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleClickShowPassword=function(){a.setState({showPassword:!a.state.showPassword})},a.handleMouseDownPassword=function(e){e.preventDefault()},a.state={username:"",password:"",showPassword:!1},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){"username"===e.target.id?this.setState({username:e.target.value}):"password"===e.target.id&&this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;console.log("Validating"),E.collection("users").where("username","==",this.state.username).get().then(function(e){var a=e.docs.map(function(e){return e.data()});console.log(a),1===a.length?O.a.compareSync(t.state.password,a[0].password)?(t.props.updateAuth(a[0].player_id),t.props.updateAdmin(a[0].admin)):console.log("Bad Password"):console.log("Username not found")})}},{key:"render",value:function(){return r.a.createElement(m.a,{theme:M},r.a.createElement(j.a,{id:"username",label:"Username",value:this.state.username,onChange:this.handleChange,margin:"normal",variant:"outlined",fullWidth:!0}),r.a.createElement(j.a,{id:"password",variant:"outlined",type:this.state.showPassword?"text":"password",label:"Password",value:this.state.password,onChange:this.handleChange,fullWidth:!0,margin:"normal",InputProps:{endAdornment:r.a.createElement(C.a,{position:"end"},r.a.createElement(P.a,{edge:"end","aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword},this.state.showPassword?r.a.createElement(D.a,null):r.a.createElement(L.a,null)))}}),r.a.createElement(g.a,{container:!0,alignItems:"center",justify:"center"},r.a.createElement(v.a,{variant:"contained",size:"large",color:"primary",style:q,onClick:this.handleSubmit},"Login")))}}]),t}(n.Component),N=Object(h.b)(function(e){return{}},function(e){return{updateAuth:function(t){return e({type:"authenticate",payload:t})},updateAdmin:function(t){return e({type:"set_admin",payload:t})}}})(z),B=a(296),F=a(307),G={margin:15},H=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleClickShowPassword=function(){a.setState({showPassword:!a.state.showPassword})},a.handleMouseDownPassword=function(e){e.preventDefault()},a.state={username:"",password:"",first_name:"",last_name:"",chck_chaser:!1,chck_beater:!1,chck_keeper:!1,chck_seeker:!1},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){console.log(e.target.checked),"username"===e.target.id?this.setState({username:e.target.value}):"password"===e.target.id?this.setState({password:e.target.value}):"first_name"===e.target.id?this.setState({first_name:e.target.value}):"last_name"===e.target.id?this.setState({last_name:e.target.value}):"chck_chaser"===e.target.id?this.setState({chck_chaser:e.target.checked}):"chck_beater"===e.target.id?this.setState({chck_beater:e.target.checked}):"chck_keeper"===e.target.id?this.setState({chck_keeper:e.target.checked}):"chck_seeker"===e.target.id&&this.setState({chck_seeker:e.target.checked})}},{key:"handleSubmit",value:function(e){var t=this;console.log("Registering"),E.collection("users").where("username","==",this.state.username).get().then(function(e){var a=e.docs.map(function(e){return e.data()});if(console.log(a),1===a.length)console.log("Username already exists");else{console.log("Username is avaliable");var n={first_name:t.state.first_name,last_name:t.state.last_name,positions:{chaser:t.state.chck_chaser,beater:t.state.chck_beater,keeper:t.state.chck_keeper,seeker:t.state.chck_seeker},practices:null,comments:null};E.collection("players").add(n).then(function(e){e.get().then(function(e){var a={username:t.state.username,password:O.a.hashSync(t.state.password,10),player_id:e.id,admin:!1};E.collection("users").add(a),t.props.updateAuth(e.id)})})}})}},{key:"render",value:function(){return r.a.createElement(m.a,{theme:M},r.a.createElement(j.a,{id:"first_name",label:"First Name",value:this.state.first_name,onChange:this.handleChange,margin:"normal",variant:"outlined",fullWidth:!0}),r.a.createElement(j.a,{id:"last_name",label:"Last Name",value:this.state.last_name,onChange:this.handleChange,margin:"normal",variant:"outlined",fullWidth:!0}),r.a.createElement(B.a,{label:"Chaser",control:r.a.createElement(F.a,{checked:this.state.chck_chaser,onChange:this.handleChange,color:"primary",id:"chck_chaser"})}),r.a.createElement(B.a,{label:"Beater",control:r.a.createElement(F.a,{checked:this.state.chck_beater,onChange:this.handleChange,color:"primary",id:"chck_beater"})}),r.a.createElement(B.a,{label:"Keeper",control:r.a.createElement(F.a,{checked:this.state.chck_keeper,onChange:this.handleChange,color:"primary",id:"chck_keeper"})}),r.a.createElement(B.a,{label:"Seeker",control:r.a.createElement(F.a,{checked:this.state.chck_seeker,onChange:this.handleChange,color:"primary",id:"chck_seeker"})}),r.a.createElement(j.a,{id:"username",label:"Username",value:this.state.username,onChange:this.handleChange,margin:"normal",variant:"outlined",fullWidth:!0}),r.a.createElement(j.a,{id:"password",variant:"outlined",type:this.state.showPassword?"text":"password",label:"Password",value:this.state.password,onChange:this.handleChange,margin:"normal",fullWidth:!0,InputProps:{endAdornment:r.a.createElement(C.a,{position:"end"},r.a.createElement(P.a,{edge:"end","aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword},this.state.showPassword?r.a.createElement(D.a,null):r.a.createElement(L.a,null)))}}),r.a.createElement(g.a,{container:!0,alignItems:"center",justify:"center"},r.a.createElement(v.a,{variant:"contained",size:"large",color:"primary",style:G,onClick:this.handleSubmit},"Register")))}}]),t}(n.Component),K=Object(h.b)(function(e){return{}},function(e){return{updateAuth:function(t){return e({type:"authenticate",payload:t})}}})(H),J={margin:15},T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",loginscreen:[],loginmessage:"",buttonLabel:"Set-up a new account",isLogin:!0},a.handleSwitch=a.handleSwitch.bind(Object(p.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=[];e.push(r.a.createElement(N,{key:"login"}));this.setState({loginscreen:e,loginmessage:"Not registered yet, Register Now"})}},{key:"handleSwitch",value:function(){var e,t=[];this.state.isLogin?(t.push(r.a.createElement(K,{key:"register"})),e="Already registered.Go to Login",this.setState({loginscreen:t,loginmessage:e,buttonLabel:"Already have an account?",isLogin:!1})):(t.push(r.a.createElement(N,{key:"login"})),e="Not Registered yet.Go to registration",this.setState({loginscreen:t,loginmessage:e,buttonLabel:"Set-up a new account",isLogin:!0}))}},{key:"render",value:function(){return r.a.createElement(m.a,{theme:M},r.a.createElement(f.a,{position:"static"},r.a.createElement(b.a,null,r.a.createElement(y.a,{variant:"h6"},this.state.isLogin?"Login":"Register"))),r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,xs:!0}),r.a.createElement(g.a,{item:!0,xs:3},this.state.loginscreen),r.a.createElement(g.a,{item:!0,xs:!0})),r.a.createElement("div",null,this.state.loginmessage,r.a.createElement(v.a,{variant:"contained",size:"large",color:"primary",style:J,onClick:this.handleSwitch},this.state.buttonLabel)))}}]),t}(n.Component),Q=Object(h.b)(function(e){return{}},function(e){return{}})(T),V=a(28),X=a(34),$=a.n(X),Y=a(304),Z=a(291),ee=a(299),te=a(302),ae=a(300),ne=a(301),re=a(303),ie=a(151),ce=a.n(ie),se=a(149),oe=a.n(se),le=a(150),de=a.n(le),ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"isAccepted",value:function(e){for(var t in this.props.practices)if(this.props.practices[t].id===e)return!!this.props.practices[t].accepted.includes(this.props.player_id);return!1}},{key:"isDenied",value:function(e){for(var t in this.props.practices)if(this.props.practices[t].id===e)return!!this.props.practices[t].denied.includes(this.props.player_id);return!1}},{key:"acceptPractice",value:function(e){var t=this;if(this.isAccepted(e))return null;E.collection("practices").doc(e).get().then(function(a){var n=a.data();n.accepted.push(t.props.player_id),t.isDenied(e)&&(n.denied=$.a.remove(n.denied,function(t){return t===e})),E.collection("practices").doc(e).set(n);var r=$.a.cloneDeep(t.props.practices);for(var i in r)r[i].id===e&&(r[i]=n,r[i].id=e);t.props.updatePractices(r),t.forceUpdate()})}},{key:"denyPractice",value:function(e){var t=this;if(this.isDenied(e))return null;E.collection("practices").doc(e).get().then(function(a){var n=a.data();n.denied.push(t.props.player_id),t.isAccepted(e)&&(n.accepted=$.a.remove(n.accepted,function(t){return t===e})),E.collection("practices").doc(e).set(n);var r=$.a.cloneDeep(t.props.practices);for(var i in r)r[i].id===e&&(r[i]=n,r[i].id=e);t.props.updatePractices(r),t.forceUpdate()})}},{key:"loadPractices",value:function(){var e=this;return this.props.practices?this.props.practices.map(function(t){return r.a.createElement(ee.a,{button:!0,key:t.id},r.a.createElement(ae.a,null,r.a.createElement(ne.a,{style:{width:"60px",height:"60px"}},r.a.createElement(y.a,{variant:"h5",style:{margin:"10px"}},t.day[0]+"/"+t.day[1]))),r.a.createElement(te.a,{primary:t.location,secondary:t.start[0]+":"+(t.start[1]<10?"0"+t.start[1]:t.start[1])+(t.start[2]===t.end[2]?"":" ("+t.start[2]+")")+" - "+t.end[0]+":"+(t.end[1]<10?"0"+t.end[1]:t.end[1])+" ("+t.end[2]+")",style:{marginLeft:"20px"}}),r.a.createElement(re.a,null,r.a.createElement(P.a,{edge:"end","aria-label":"edit",style:{marginRight:"10px"},color:e.isAccepted(t.id)?"primary":"default",onClick:function(){return e.acceptPractice(t.id)}},r.a.createElement(oe.a,null)),r.a.createElement(P.a,{edge:"end","aria-label":"edit",style:{marginRight:"10px"},color:e.isDenied(t.id)?"primary":"default",onClick:function(){return e.denyPractice(t.id)}},r.a.createElement(de.a,null)),e.props.admin_mode?r.a.createElement(P.a,{edge:"end","aria-label":"edit"},r.a.createElement(ce.a,null)):null))}):null}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,{theme:M},r.a.createElement(Z.a,null,r.a.createElement(f.a,{position:"static",color:"secondary"},r.a.createElement(y.a,{variant:"h5",style:{margin:"10px"}},"Practices")),r.a.createElement(Y.a,null),this.loadPractices())))}}]),t}(n.Component),he=Object(h.b)(function(e){return{admin_mode:e.admin_mode,practices:e.practices,player_id:e.player_id}},function(e){return{updatePractices:function(t){return e({type:"update_practices",payload:t})}}})(ue),pe=a(305),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,{theme:M},r.a.createElement(pe.a,null,"LMAO")))}}]),t}(n.Component),ge=Object(h.b)(function(e){return{practices:e.practices,id:e.open_practice}},function(e){return{storePractices:function(t){return e({type:"update_practices",payload:t})}}})(me),fe=a(152),be=a.n(fe);function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={width:window.innerWidth,height:window.innerHeight,first_name:"",last_name:""},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(p.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.updateWindowDimensions),E.collection("players").doc(this.props.player_id).get().then(function(t){e.setState(t.data())}),E.collection("practices").get().then(function(t){var a=t.docs.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(a,!0).forEach(function(t){Object(V.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e.data(),{id:e.id})});e.props.storePractices(a),e.props.setOpenPractice(a[0].id)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"setupPage",value:function(){var e=this.state.width<960,t=r.a.createElement(g.a,{item:!0,xs:e?12:3,key:"practices"},r.a.createElement(he,null)),a=r.a.createElement(g.a,{item:!0,xs:e?12:9,key:"view"},r.a.createElement(ge,null));return e?[a,t]:[t,a]}},{key:"render",value:function(){return r.a.createElement(m.a,{theme:M},r.a.createElement("div",null,r.a.createElement(f.a,{position:"static"},r.a.createElement(b.a,null,r.a.createElement(y.a,{variant:"h4"},"Welcome, ",this.state.first_name),this.props.admin_mode?r.a.createElement(be.a,{style:{marginLeft:"auto"}}):null))),r.a.createElement("div",null,r.a.createElement(g.a,{container:!0},this.setupPage())))}}]),t}(n.Component),we=Object(h.b)(function(e){return{admin_mode:e.admin_mode,player_id:e.player_id}},function(e){return{updateAuth:function(){return e({type:"authenticate",payload:null})},storePractices:function(t){return e({type:"update_practices",payload:t})},setOpenPractice:function(t){return e({type:"set_open_practice",payload:t})}}})(ve),ke=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.authenticated?r.a.createElement("div",null,r.a.createElement(we,null)):r.a.createElement("div",null,r.a.createElement(Q,null)))}}]),t}(n.Component),Ee=Object(h.b)(function(e){return{authenticated:e.authenticated}},function(e){return{}})(ke);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=a(64),Oe={authenticated:!1,player_id:"",admin_mode:!1,practices:null,open_practice:0},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dump_store":return console.log(e),e;case"authenticate":var a=$.a.cloneDeep(e);return a.authenticated=!0,a.player_id=t.payload,a;case"set_admin":var n=$.a.cloneDeep(e);return n.admin_mode=t.payload,n;case"set_open_practice":var r=$.a.cloneDeep(e);return r.open_practice=t.payload,r;case"update_practices":var i=$.a.cloneDeep(e);return i.practices=t.payload,i;default:return e}};var Pe,Ce=(Pe=window.REDUX_INITIAL_DATA,Object(_e.b)(je,Pe));c.a.render(r.a.createElement(h.a,{store:Ce},r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[162,1,2]]]);
//# sourceMappingURL=main.241f0eae.chunk.js.map